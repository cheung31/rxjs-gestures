{"version":3,"sources":["../../src/operators/PressOperator.js"],"names":["PressOperator","delay","radius","Gestures","subscriber","source","subscribe","PressSubscriber","destination","starts","topLevelElement","key","isMouse","selectPoint","moves","move","filter","ends","end","cancels","cancel","press"],"mappings":";;;;;;;;;;;AAAA;;AACA;;;;;;;;IAEaA,a,WAAAA,a;AACT,2BAAYC,KAAZ,EAAmBC,MAAnB,EAA2BC,QAA3B,EAAqC;AAAA;;AACjC,aAAKF,KAAL,GAAaA,KAAb;AACA,aAAKC,MAAL,GAAcA,MAAd;AACA,aAAKC,QAAL,GAAgBA,QAAhB;AACH;;;;6BACIC,U,EAAYC,M,EAAQ;AACrB,mBAAOA,OAAOC,SAAP,CAAiB,IAAIC,eAAJ,CAAoBH,UAApB,EACoB,KAAKH,KADzB,EAEoB,KAAKC,MAFzB,EAGoB,KAAKC,QAHzB,CAAjB,CAAP;AAIH;;;;;;IAGQI,e,WAAAA,e;;;AACT,6BAAYC,WAAZ,EAAyBP,KAAzB,EAAgCC,MAAhC,EAAwCC,QAAxC,EAAkD;AAAA;;AAAA,sIACxCK,WADwC;;AAE9C,cAAKP,KAAL,GAAaA,KAAb;AACA,cAAKC,MAAL,GAAcA,MAAd;AACA,cAAKC,QAAL,GAAgBA,QAAhB;AAJ8C;AAKjD;;;;8BACKM,M,EAAQ;AAAA,gBAEFR,KAFE,GAE0B,IAF1B,CAEFA,KAFE;AAAA,gBAEKC,MAFL,GAE0B,IAF1B,CAEKA,MAFL;AAAA,gBAEaC,QAFb,GAE0B,IAF1B,CAEaA,QAFb;AAAA,gBAGFO,eAHE,GAGkBP,QAHlB,CAGFO,eAHE;AAAA,gBAIFC,GAJE,GAIMF,MAJN,CAIFE,GAJE;;AAKV,gBAAMC,UAAUD,QAAQ,OAAxB;AACA,gBAAME,cAAcD,UAAU,IAAV,GAAiB,uBAASD,GAAT,CAArC;;AAEA,gBAAMG,QAAQF,UACVT,SAASY,IAAT,CAAcL,eAAd,CADU,GAEVP,SAASY,IAAT,CAAcL,eAAd,EAA+BM,MAA/B,CAAsCH,WAAtC,CAFJ;;AAIA,gBAAMI,OAAOL,UACTT,SAASe,GAAT,CAAaR,eAAb,CADS,GAETP,SAASe,GAAT,CAAaR,eAAb,EAA8BM,MAA9B,CAAqCH,WAArC,CAFJ;;AAIA,gBAAMM,UAAUP,UACZT,SAASiB,MAAT,CAAgBV,eAAhB,CADY,GAEZP,SAASiB,MAAT,CAAgBV,eAAhB,EAAiCM,MAAjC,CAAwCH,WAAxC,CAFJ;;AAIA,oIAAYV,SAASkB,KAAT,CAAeZ,MAAf,EAAuBK,KAAvB,EAA8BG,IAA9B,EAAoCE,OAApC,EAA6C,EAAElB,YAAF,EAASC,cAAT,EAA7C,CAAZ;AACH","file":"PressOperator.js","sourcesContent":["import { selectId } from '../support';\nimport { Subscriber } from 'rxjs/Subscriber';\n\nexport class PressOperator {\n    constructor(delay, radius, Gestures) {\n        this.delay = delay;\n        this.radius = radius;\n        this.Gestures = Gestures;\n    }\n    call(subscriber, source) {\n        return source.subscribe(new PressSubscriber(subscriber,\n                                                    this.delay,\n                                                    this.radius,\n                                                    this.Gestures));\n    }\n}\n\nexport class PressSubscriber extends Subscriber {\n    constructor(destination, delay, radius, Gestures) {\n        super(destination);\n        this.delay = delay;\n        this.radius = radius;\n        this.Gestures = Gestures;\n    }\n    _next(starts) {\n\n        const { delay, radius, Gestures } = this;\n        const { topLevelElement } = Gestures;\n        const { key } = starts;\n        const isMouse = key === 'mouse';\n        const selectPoint = isMouse ? null : selectId(key);\n\n        const moves = isMouse ?\n            Gestures.move(topLevelElement) :\n            Gestures.move(topLevelElement).filter(selectPoint);\n\n        const ends = isMouse ?\n            Gestures.end(topLevelElement) :\n            Gestures.end(topLevelElement).filter(selectPoint);\n\n        const cancels = isMouse ?\n            Gestures.cancel(topLevelElement) :\n            Gestures.cancel(topLevelElement).filter(selectPoint);\n\n        super._next(Gestures.press(starts, moves, ends, cancels, { delay, radius }));\n    }\n}\n"]}